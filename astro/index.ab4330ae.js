import{r as c}from"./index.ed373d49.js";let n=[],b=(u,r)=>{let i=[],t={get(){return t.lc||t.listen(()=>{})(),t.value},l:r||0,lc:0,listen(l,s){return t.lc=i.push(l,s||t.l)/2,()=>{let e=i.indexOf(l);~e&&(i.splice(e,2),--t.lc||t.off())}},notify(l){let s=!n.length;for(let e=0;e<i.length;e+=2)n.push(i[e],i[e+1],t.value,l);if(s){for(let e=0;e<n.length;e+=4){let f;for(let a=e+1;!f&&(a+=4)<n.length;)n[a]<n[e+1]&&(f=n.push(n[e],n[e+1],n[e+2],n[e+3]));f||n[e](n[e+2],n[e+3])}n.length=0}},off(){},set(l){t.value!==l&&(t.value=l,t.notify())},subscribe(l,s){let e=t.listen(l,s);return l(t.value),e},value:u};return t};function o(u,r,i){let t=new Set([...r,void 0]);return u.listen((l,s)=>{t.has(s)&&i(l,s)})}function h(u,r={}){let i=c.useCallback(l=>r.keys?o(u,r.keys,l):u.listen(l),[r.keys,u]),t=u.get.bind(u);return c.useSyncExternalStore(i,t,t)}export{b as a,h as u};
